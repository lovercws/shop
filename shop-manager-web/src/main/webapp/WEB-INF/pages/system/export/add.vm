<link href="$request.getContextPath()/resources/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
<script src="$request.getContextPath()/resources/bootstrap-table/bootstrap-table.min.js"></script>
<script src="$request.getContextPath()/resources/bootstrap-table/bootstrap-table-zh-CN.min.js"></script>
<script type="text/javascript">
$(function(){
   $('#tablesSelect').change(function(){
	  var tableName=$(this).children('option:selected').val();
	  if(tableName){
	     $.get('$request.getContextPath()/system/export/select?tableName='+tableName,function(fields){
	     	  loadFields(fields);
	     });
	  }	
   });
});
function stateFormatter(value, row, index) {
    if(value&&value=='true'){
    	return { checked: true}
    }
    return null;
}
function loadFields(fields){
   $("#table").bootstrapTable('removeAll');
   $("#table").bootstrapTable('load', fields);
}
function getAllSelections(){
    var selections=$('#table').bootstrapTable('getAllSelections');
    var data=SON.stringify(selections);
    console.log(data);
}
</script>
<div class="modal-content">
     <div class="modal-header">
         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
         <h4 class="modal-title" id="myModalLabel">添加菜单</h4>
     </div>
     <div class="modal-body">
         <div class="container-fluid">
			<form class="form-horizontal" role="form">
			  <div class="form-group">
			    <label  class="col-sm-2 control-label">选择模型</label>
			    <div class="col-sm-4">
			      <select id="tablesSelect" class="form-control selectpicker">
					#foreach($table in $tables)
					   #if($velocityCount==1)
					      <option value="$!table.tableName" selected>$!table.tableName</option>
					   #else
					      <option value="$!table.tableName">$!table.tableName</option>
					   #end
					#end
				  </select>
			    </div>
			  </div>
			</form>
		</div>
		<div>
			<table id="table" data-toggle="table" data-click-to-select="true">
			    <thead>
			      <tr>
			         <th data-field="state" data-checkbox="true" data-formatter="stateFormatter"></th>
			         <th data-field="fieldName">字段</th>
			         <th data-field="remarks">注释</th>
			         <th data-field="fieldType">类型</th>
			         <th data-field="fieldSize">长度</th>
			      </tr>
		        </thead>
		        <tbody>
			        #foreach($field in $fields)
			          <tr>
				         <td></td>
				         <td>$!field.fieldName</td>
				         <td>$!field.remarks</td>
				         <td>$!field.fieldType</td>
				         <td>$!field.fieldSize</td>
				      </tr>
			       #end
		        </tbody>
			</table>
		</div>
     </div>
     <div class="modal-footer">
          <button type="submit" class="btn btn-lg">保存</button>
		  <button type="button" class="btn btn-lg" data-dismiss="modal">关闭</button>
     </div>
</div>